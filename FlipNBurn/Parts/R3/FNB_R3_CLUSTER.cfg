PART
{
	name = FNB_R3_CLUSTER
	module = Part
	author = `Questin

		MODEL 
	{
		model = FlipNBurn/Assets/R3/FNB_R3_CLUSTER
		position = 0, 0, 0
		rotation = -90, 0, -90
		scale = 1, 1, 1
	}
	rescaleFactor = .625


	TechRequired = advConstruction
	entryCost = 3000
	cost = 15000
	category = FuelTank
	subcategory = 0
	title = Atrociraptor-3 Cluster // I like dynosor :>
	manufacturer = Rapid Unscheduled Industries
	description = Next Generation of the Atrociraptor Engine
	tags = spacex, bl3, booster, sh, superheavy, 3, block, cluster, r3, raptor, rb, rc, center, core, inner, outer
	CoMOffset = 0, 0, 0
	
	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,0,1,1,0

	mass = 30.3
	dragModelType = default
	maximum_drag = 1.1
	minimum_drag = 0.9
	angularDrag = 2
	crashTolerance = 22
	breakingForce = 250
	breakingTorque = 250
	maxTemp = 12500
	dragMultiplier = 0.5
	NODE
    {
        name = node_stack_top
        transform = node_stack_top
        size = 4
        method = FIXED_JOINT
    }

	NODE
    {
        name = node_stack_bottom.004
        transform = node_stack_bottom.004
        size = 4
        method = FIXED_JOINT
    }

    MODULE
	{
		name = ModuleEnginesFX
		engineID = All
		thrustVectorTransformName = Full
		runningEffectName = running_full
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 13440
		heatProduction = 110
		fxOffset = 0, 0, 0
		EngineType = LiquidFuel
		exhaustDamageDistanceOffset = 1.5
		PROPELLANT
		{
			name = LqdMethane
			ratio = 3
			DrawGauge = True
		}
		PROPELLANT
		{
			name = Oxidizer
			ratio = 1
		}
		atmosphereCurve
		{
			key = 0 315
			key = 1 295
			key = 12 0.001
		}
	}

    MODULE
	{
		name = ModuleEnginesFX
		engineID = Inner
		thrustVectorTransformName = Inner
		runningEffectName = running_inner
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 5376
		heatProduction = 110
		fxOffset = 0, 0, 0
		EngineType = LiquidFuel
		exhaustDamageDistanceOffset = 1.5
		PROPELLANT
		{
			name = LqdMethane
			ratio = 3
			DrawGauge = True
		}
		PROPELLANT
		{
			name = Oxidizer
			ratio = 1
		}
		atmosphereCurve
		{
			key = 0 315
			key = 1 295
			key = 12 0.001
		}
	}

     MODULE
	{
		name = ModuleEnginesFX
		engineID = 2Inner
		thrustVectorTransformName = 2Inner
		runningEffectName = running_inner
		engageEffectName  = engage        
    	flameoutEffectName = flameout 
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 1344
		heatProduction = 110
		fxOffset = 0, 0, 0
		EngineType = LiquidFuel
		exhaustDamageDistanceOffset = 1.5
		PROPELLANT
		{
			name = LqdMethane
			ratio = 3
			DrawGauge = True
		}
		PROPELLANT
		{
			name = Oxidizer
			ratio = 1
		}
		atmosphereCurve
		{
			key = 0 315
			key = 1 295
			key = 12 0.001
		}
	}

	MODULE
	{
		name = ModuleEnginesFX
		engineID = Core
		thrustVectorTransformName = Core
		runningEffectName = running_core
		engageEffectName  = engage        
    	flameoutEffectName = flameout 
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 2016
		heatProduction = 110
		fxOffset = 0, 0, 0
		EngineType = LiquidFuel
		exhaustDamageDistanceOffset = 1.5
		PROPELLANT
		{
			name = LqdMethane
			ratio = 3
			DrawGauge = True
		}
		PROPELLANT
		{
			name = Oxidizer
			ratio = 1
		}
		atmosphereCurve
		{
			key = 0 315
			key = 1 295
			key = 12 0.001
		}
	}

	MODULE
	{
		name = ModuleAlternator
		RESOURCE
		{
			name = ElectricCharge
			rate = 3.0
		}
	}

	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 1
		fxMax = 0.9
		maxDistance = 75
		falloff = 1.75
		thrustTransformName = Outer
	}

	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 2
		fxMax = 0.9
		maxDistance = 40
		falloff = 1.75
		thrustTransformName = Inner
    }

        MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 3
		fxMax = 0.9
		maxDistance = 40
		falloff = 1.75
		thrustTransformName = 2Inner
    }

    MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 4
		fxMax = 0.9
		maxDistance = 22
		falloff = 1.75
		thrustTransformName = Core
	}

	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = Core
		gimbalRange = 8
 		gimbalResponseSpeed = 8
 		useGimbalResponseSpeed = true
	}

    MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = 2Inner
		gimbalRange = 8
 		gimbalResponseSpeed = 8
 		useGimbalResponseSpeed = true
	}

	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = Inner
		gimbalRange = 8
 		gimbalResponseSpeed = 8
 		useGimbalResponseSpeed = true
	}

	MODULE
	{
       name = ModuleSEPEngineSwitch
	   WaterfallControllerName = EngineMode
	   EngineID = All
	   EngineID = Inner
       EngineID = 2Inner
	   EngineID = Core
	}

    MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1
            rotatorsName = GimbalBall1
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1
            rotatorsName = Gimbal1
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2
            rotatorsName = Gimbal2
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2
            rotatorsName = GimbalBall2
        }
	}

	 MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.001
            rotatorsName = GimbalBall1.001
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.001
            rotatorsName = Gimbal1.001
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.001
            rotatorsName = Gimbal2.001
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.001
            rotatorsName = GimbalBall2.001
        }
	}

	 MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.002
            rotatorsName = GimbalBall1.002
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.002
            rotatorsName = Gimbal1.002
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.002
            rotatorsName = Gimbal2.002
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.002
            rotatorsName = GimbalBall2.002
        }
	}

	 MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.003
            rotatorsName = GimbalBall1.003
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.003
            rotatorsName = Gimbal1.003
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.003
            rotatorsName = Gimbal2.003
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.003
            rotatorsName = GimbalBall2.003
        }
	}

	 MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.004
            rotatorsName = GimbalBall1.004
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.004
            rotatorsName = Gimbal1.004
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.004
            rotatorsName = Gimbal2.004
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.004
            rotatorsName = GimbalBall2.004
        }
	}

	 MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.005
            rotatorsName = GimbalBall1.005
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.005
            rotatorsName = Gimbal1.005
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.005
            rotatorsName = Gimbal2.005
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.005
            rotatorsName = GimbalBall2.005
        }
	}

	 MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.006
            rotatorsName = GimbalBall1.006
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.006
            rotatorsName = Gimbal1.006
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.006
            rotatorsName = Gimbal2.006
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.006
            rotatorsName = GimbalBall2.006
        }
	}

     MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.007
            rotatorsName = GimbalBall1.007
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.007
            rotatorsName = Gimbal1.007
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.007
            rotatorsName = Gimbal2.007
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.007
            rotatorsName = GimbalBall2.007
        }
	}

     MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.008
            rotatorsName = GimbalBall1.008
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.008
            rotatorsName = Gimbal1.008
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.008
            rotatorsName = Gimbal2.008
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.008
            rotatorsName = GimbalBall2.008
        }
	}

     MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.009
            rotatorsName = GimbalBall1.009
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.009
            rotatorsName = Gimbal1.009
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.009
            rotatorsName = Gimbal2.009
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.009
            rotatorsName = GimbalBall2.009
        }
	}

    MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.010
            rotatorsName = GimbalBall1.010
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.010
            rotatorsName = Gimbal1.010
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.010
            rotatorsName = Gimbal2.010
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.010
            rotatorsName = GimbalBall2.010
        }
	}

     MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.011
            rotatorsName = GimbalBall1.011
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.011
            rotatorsName = Gimbal1.011
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.011
            rotatorsName = Gimbal2.011
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.011
            rotatorsName = GimbalBall2.011
        }
	}

     MODULE
    {
        name = FXModuleLookAtConstraint

		CONSTRAINLOOKFX
        {
            targetName = Gimbal1.012
            rotatorsName = GimbalBall1.012
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall1.012
            rotatorsName = Gimbal1.012
        }

		CONSTRAINLOOKFX
        {
            targetName = GimbalBall2.012
            rotatorsName = Gimbal2.012
        }

		CONSTRAINLOOKFX
        {
            targetName = Gimbal2.012
            rotatorsName = GimbalBall2.012
        }
	}

    EFFECTS
    {
        running_full
        {
            AUDIO
            {
                channel = Ship
                clip = FlipNBurn/Sounds/Cluster
                volume = 0.0 0.0
                volume = 0.1 1.0
                volume = 2.0 3.0
                pitch = 0.0 0.7
                pitch = 1.0 1.0
                loop = true
            }
        }
        running_inner
        {
            AUDIO
            {
                channel = Ship
                clip = FlipNBurn/Sounds/Landing
                volume = 0.0 0.0
                volume = 0.1 1.0
                volume = 2.0 3.0
                pitch = 0.0 0.7
                pitch = 1.0 1.0
                loop = true
            }
        }
		running_core
        {
            AUDIO
            {
                channel = Ship
                clip = FlipNBurn/Sounds/Landing
                volume = 0.0 0.0
                volume = 0.1 1.0
                volume = 2.0 3.0
                pitch = 0.0 0.7
                pitch = 1.0 1.0
                loop = true
            }
        }
        engage
		{
			AUDIO
			{
				channel = Ship
				clip = Raptor3WE/Sounds/R3Ignite
				volume = 1.0
				pitch = 1.0
				loop = false
			}
		}
		disengage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 0.8
				loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = thrustTransform
				oneShot = true
				//localOffset = 0,0,1.8
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 0.8
				loop = false
			}
		}
	}
}