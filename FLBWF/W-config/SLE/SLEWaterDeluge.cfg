@PART[SLE_SS_SteelPlate]:NEEDS[Waterfall]:AFTER[StarshipLaunchExpansion]
{
	MODULE
{
    name = DelugeWaterfallController
    controllerName = Deluge
    rampUpTime = 3
    rampDownTime = 3
    engineID = Engine
}
MODULE
{
    name = LiftoffConsumer
}

    !MODULE[ModuleEnginesFX],* {}
  	!EFFECTS {}
    	EFFECTS
	{
		running_engine
		{
			AUDIO
			{
				channel = Ship
				clip = SEP_visual improve/Sounds/Deluge
				volume = 0.0 0.0
				volume = 0.1 0.3
				volume = 0.8 1
				pitch = 0.0 1.0
				pitch = 1.0 1.0
				loop = true
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = SEP_visual improve/Sounds/DelugeStartUp
				volume = 1.0
				pitch = 1.0
				loop = false
			}
		}
		disengage
		{
			AUDIO
			{
				channel = Ship
				clip = SEP_visual improve/Sounds/DelugeFlameout
				volume = 1.0
				pitch = 0.8
				loop = false
			}
		}
	}
    	MODULE
    {
        name = ModuleEnginesFX
        thrustVectorTransformName = DelugeTransform
        runningEffectName = running_engine
        throttleLocked = True
        exhaustDamage = False
        allowShutdown = True
		stagingEnabled = False
        ignitionThreshold = 0.1
        minThrust = 0
        maxThrust = 1
        heatProduction = 0
        nonThrustMotor = true
		engineAccelerationSpeed = 10.5
		engineDecelerationSpeed = 10
		useEngineResponseTime = True
		
        PROPELLANT
        {
            name = DelugeWater
            ratio = 2
            DrawGauge = True
        }
        atmosphereCurve
        {
            key = 0 100
            key = 1 100
        }
    }
    MODULE
{
	name = ModuleWaterfallFX
	moduleID = Deluge
	version = FixedRampRates
    CONTROLLER
    {
        name = random
        linkedTo = random
        range = -1,1
    }
	CONTROLLER
{
    name = Deluge
    linkedTo = custom
}
	ENGINEEVENTCONTROLLER
	{
		eventName = flameout
		engineID = Engine
		eventDuration = 4
		name = Flameout
		eventCurve
		{
			key = 0 0 0 0.9
			key = 4 4 0.9 0
		}
	}
CONTROLLER
{
  name = liftoff time
  linkedTo = custom
}

CONTROLLER
{
  name = ClusterPower
  linkedTo = custom
}
CONTROLLER
{
  name = liftoff down
  linkedTo = custom
}

	TEMPLATE
	{
		templateName = Deluge
		position = 0,0,0
		rotation = 0,0,0
		scale = 0.675000012,0.675000012,0.675000012
	    }
    }
}

